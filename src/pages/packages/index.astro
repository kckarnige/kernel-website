---
import BaseLayout from "~/layouts/BaseLayout.astro";
import PageSection from "~/components/PageSection";
import PackageListing from "~/components/PackageListing";

let packages;

try {
    packages = await Astro.glob("~/packages/*.json");
} catch(error) {
    packages = [];
}
---

<BaseLayout title="Kernel - Packages">
    <PageSection>
        <PackageListing {packages} client:load />
    </PageSection>
</BaseLayout>

<style>
    .kernel-packages-container {
        margin: 0;
        padding: 0;
        display: grid;
        grid-gap: 16px;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    }

    .kernel-packages-header {
        padding-block-start: 8px;
    }
    
    .kernel-packages-header hr {
        margin-block: 16px;
        border: none;
        border-block-start: 1px solid var(--kernel-interactive-primary);
    }
</style>